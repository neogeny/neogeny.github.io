(function(){function C(G,F,E){if(G.addEventListener){G.addEventListener(F,E,false)}else{if(G.attachEvent){G["e"+F+E]=E;G[F+E]=function(){G["e"+F+E](window.event)};G.attachEvent("on"+F,G[F+E])}}}function B(E){if(E.stopPropagation){E.stopPropagation()}if(E.preventDefault){E.preventDefault()}E.cancelBubble=true;E.returnValue=false;return false}var A={name:"Entity Picker",rows:{length:0,last:null,add:function(E){this[this.length++]=E},changeTo:function(H,G){var J=(typeof G=="undefined")?0:(this.lastrow==null)?0:this.lastrow;var I=(typeof G=="undefined")?this.length:G+1;for(var E=Math.min(J,I),F=Math.max(J,I);E<F;E++){this[E].parentNode.parentNode.checked=this[E].checked=H}},update:function(){var E=true;for(var F=0,G=this.length;F<G;F++){E=E&&this[F].checked}A.topcheckbox.checked=E},toString:function(){var F=[];for(var E=0,G=this.length;E<G;E++){if(this[E].checked){F.push(this[E].value.replace(/([\\,])/g,"\\$1"))}}return F.join(", ")}}};function D(){var I=document.getElementById("entitySearchResults");if(I){try{A.topcheckbox=I.getElementsByTagName("thead")[0].getElementsByTagName("input")[0];if(!A.topcheckbox){throw"Top checkbox does not exist"}A.topcheckbox.onclick=function(){A.rows.changeTo(this.checked)};A.button=document.getElementById("select-entities");if(!A.button){throw"Select button does not exist"}A.button.onclick=function(){var L=opener;var K=this.className.split(".");while(K.length){L=L[K.shift()]}L(A.rows.toString());window.close()};var F=I.getElementsByTagName("tbody")[0].getElementsByTagName("tr");for(var G=0,H=F.length;G<H;G++){var E=F[G].getElementsByTagName("input")[0];if(E.type="checkbox"){F[G].checked=E.checked;A.rows.add(E)}F[G].number=G;F[G].onclick=function(L){var K=L||window.event;if(K.shiftKey){A.rows.changeTo(!this.checked,this.number)}else{A.rows[this.number].checked=this.checked=!this.checked}if(this.checked){A.rows.last=this.number}A.rows.update()}}}catch(J){if(typeof console!="undefined"){console.log(J)}}}}C(window,"load",D)})();