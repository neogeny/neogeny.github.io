AJS.toInit(function(A){if(!A("#add-labels-form").length){return }A(".show-labels-editor").click(function(){AJS.safe.ajax({url:AJS.params.contextPath+"/json/suggestlabelsactivity.action",data:{entityIdString:AJS.params.pageId},success:AJS.Labels.suggestedLabelsCallback,error:AJS.Labels.suggestedLabelsErrorHandler,dataType:"json"});A("#labelsString").val("");A("#labels-section").addClass("open");AJS.setVisible(".show-labels-editor",false);AJS.setVisible("a.hide-labels-editor",true);AJS.setVisible("#labels-section-title",true);A("#labelsString").get(0).focus();return false});A(".hide-labels-editor").click(function(){AJS.Labels.labelOperationError("");A("#errorSpan").html("");A("#labels-section").removeClass("open");AJS.setVisible("a.hide-labels-editor",false);AJS.setVisible(".show-labels-editor",true);if(A("#labelsList").children().length==0&&A("#labelsString").val()==""){A(".show-labels-editor").addClass("add").text(AJS.params.addLabel);AJS.setVisible("#labels-section-title",false)}else{A(".show-labels-editor").removeClass("add").text(AJS.params.editLabel);AJS.setVisible("#labels-section-title",true)}AJS.Labels.addLabelFromInput();return false});A("#add-labels-form").submit(AJS.Labels.addLabelFromInput);A(".labels-editor .add-labels").click(AJS.Labels.addLabelFromInput);A(".labels-editor .remove-label").click(AJS.Labels.removeLabel);A("#labelsString").keydown(function(B){if(B.which==13&&!AJS.dropDown.current){AJS.Labels.addLabelFromInput();return AJS.stopEvent(B)}})});