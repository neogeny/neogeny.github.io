var operationInProgressArray=new Array();function toggleStar(E){var B=AJS.$(E),D=E.id,A=false,C=null;if(D!=null&&D.substring(0,14)=="spacelink-fav-"){D=D.substring(14);A=true;C=AJS.$("#spacelink-"+D).text()}if(B.hasClass("icon-add-fav")){B.removeClass("icon-add-fav").addClass("icon-remove-fav");if(A){B.attr("title",AJS.$("#i18n-favourite-remove-space").val());B.text(AJS.$("#i18n-favourite-remove-space-short").val().replace("{0}",C))}}else{B.removeClass("icon-remove-fav").addClass("icon-add-fav");if(A){B.attr("title",AJS.$("#i18n-favourite-add-space").val());B.text(AJS.$("#i18n-favourite-add-space-short").val().replace("{0}",C))}}}function addOrRemoveFromFavourites(C,D){if(operationInProgressArray[D.id]==null){operationInProgressArray[D.id]=true;var B,A=AJS.$(D);if(A.hasClass("icon-remove-fav")){B=contextPath+"/json/removespacefromfavourites.action"}else{B=contextPath+"/json/addspacetofavourites.action"}AJS.safe.ajax({url:B,type:"POST",data:{key:C},success:function(){toggleStar(D);operationInProgressArray[D.id]=null},error:function(G,F,E){alert("Error : "+F);operationInProgressArray[D.id]=null}})}}function gotoUrl(B){for(var A in operationInProgressArray){if(operationInProgressArray[A]==true){return }}window.location=B};