AJS.Confluence.Binder.userHover=(function(){var E=[],B=AJS.Confluence.getContextPath(),D=AJS.$;var A=function(H){var G=E[H],F={username:G,target:this};D(self).trigger("hover-user.open",F);D(".ajs-menu-bar",this).ajsMenu();D(".follow-icon, .unfollow-icon",this).each(function(){var I=D(this).click(function(K){if(I.hasClass("waiting")){return }var J=I.hasClass("unfollow-icon")?"/unfollowuser.action":"/followuser.action";I.addClass("waiting");AJS.safe.post(B+J+"?username="+G+"&mode=blank",function(){I.removeClass("waiting");I.parent().toggleClass("follow-item").toggleClass("unfollow-item");D(self).trigger("hover-user.follow",F)});return AJS.stopEvent(K)})})};var C=["span.user-hover-trigger","a.confluence-userlink","img.confluence-userlink","a.userLogoLink"].join(", ");return function(){D(C).filter("[data-processed!=true]").each(function(){var G=D(this),H=G.attr("data-username");G.attr("title","").attr("data-processed","true");D("img",G).attr("title","");var F=D.inArray(H,E);if(F==-1){E.push(H);F=D.inArray(H,E)}D(this).addClass("userlink-"+F)});D.each(E,function(F){AJS.contentHover(D(".userlink-"+F),F,B+"/users/userinfopopup.action?username="+E[F],A)})}})();