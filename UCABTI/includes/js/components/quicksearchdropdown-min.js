(function(A){A.fn.quicksearch=function(F,I,E){if(I){E.onShow=I}E.makeParams=E.makeParams||function(J){return{query:J}};var C=function(L){var M=L.statusMessage;var K;if(M){K=[[{html:L.statusMessage,className:"error"}]]}else{if(E.makeRestMatrixFromData){var J=E.makeRestMatrixFromData(L);K=AJS.REST.convertFromRest(J);if(E.addDropdownData){K=E.addDropdownData(K)}}else{K=L.contentNameMatches}}return K};var D,H;if(typeof F=="function"){H=F(),D=function(K){var J=F();if(J!=H){H=J;K.clearCache()}return J}}else{D=function(){return F}}E.getDataAndRunCallback=E.getDataAndRunCallback||function(M,N){var L=this,K=D(L,M),J=AJS.params.contextPath||"";AJS.$.ajax({type:"GET",dataType:"json",url:J+K,data:E.makeParams(M),success:function(P,Q){A(window).trigger("quicksearch.ajax-success",{url:K,json:P,resultStatus:Q});var O=C(P);N.call(L,O,M,P.queryTokens)},global:false,timeout:5000,error:function(R,P,Q){A(window).trigger("quicksearch.ajax-error",{url:K,xmlHttpRequest:R,resultStatus:P,errorThrown:Q});if(P=="timeout"){var O=C({statusMessage:"Timeout",query:M});N.call(L,O,null)}}})};var G=AJS.inputDrivenDropdown(E),B=A(this);B.keyup(function(J){if(J.which==13||J.which==9){return }!B.hasClass("placeholded")&&G.change(this.value)});B.quickSearchControl=G;return B}})(jQuery);